nextflow.enable.dsl=2
docker.enabled = true
report.overwrite = true
timeline.overwrite = true
dag.overwrite = true

process {
    maxForks = 8
    errorStrategy = 'retry'

    withLabel: SALMON {
        cpus = 4
        memory = 20.GB
    }
    withLabel: TRIM {
        cpus = 4
        memory = 8.GB
    }
    withLabel: MULTIQC {
        cpus = 4
        memory = 4.GB
    }
}
params {
    // input files
    reads = "$projectDir/meta/samples.csv"
    // Reference
    reference = "$projectDir/ctat-genome-lib" 
    transcriptome_file = "$reference/ref_annot.cdna.fa"
    genome_file = "$reference/ref_genome.fa"
    gtf_annot = "$reference/ref_annot.gtf"
    index_args = "-k 31 --gencode"
    params.salmon_index = "$reference/ref_genome.fa.salmon.idx"
    // Results
    outdir = "$projectDir/results"
    // STEP 1: trimming
    trim_outdir = "$outdir/01_trim"
    trim_args = "-q 20 --length 36 --paired --illumina"
    //STEP 2: quantification
    quant_outdir = "$outdir/02_quant"
    quant_args = "-l 'ISR'"
    //STEP 3: MultiQC report
    report_outdir = "$outdir/00_report"
}
